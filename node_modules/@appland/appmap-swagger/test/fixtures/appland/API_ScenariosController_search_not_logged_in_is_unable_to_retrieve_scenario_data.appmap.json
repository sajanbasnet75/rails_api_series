{
  "version": "1.4",
  "metadata": {
    "app": "nytem-2021/appland",
    "language": {
      "name": "ruby",
      "engine": "ruby",
      "version": "2.6.6"
    },
    "client": {
      "name": "appmap",
      "url": "https://github.com/applandinc/appmap-ruby",
      "version": "0.42.0"
    },
    "frameworks": [
      {
        "name": "rails",
        "version": "5.2.4.2"
      },
      {
        "name": "rspec",
        "version": "3.9.1"
      }
    ],
    "git": {
      "repository": "git@github.com:applandinc/appland.git",
      "branch": "swagger",
      "commit": "d82ba25ed71e5086c39becb3a3ae2cfc2a3571b6",
      "status": [
        "M Gemfile.lock",
        "?? 20210310072459.appmap.json"
      ],
      "git_last_annotated_tag": null,
      "git_last_tag": "v0.22.0",
      "git_commits_since_last_annotated_tag": null,
      "git_commits_since_last_tag": 0
    },
    "name": "API::ScenariosController .search not logged in is unable to retrieve scenario data",
    "source_location": "spec/requests/api_scenarios_search_spec.rb",
    "recorder": {
      "name": "rspec"
    },
    "fingerprints": [
      {
        "appmap_digest": "d42bbf887dcdf633d8658f2c231e892ec9b3477cc5c70489d9aa986785a580aa",
        "canonicalization_algorithm": "update_v1",
        "digest": "3ac739111f83d57835986f0cb9fa70b9cf91bf42e3c18b2a2f588f419588c4a3",
        "fingerprint_algorithm": "sha256"
      },
      {
        "appmap_digest": "d42bbf887dcdf633d8658f2c231e892ec9b3477cc5c70489d9aa986785a580aa",
        "canonicalization_algorithm": "info_v1",
        "digest": "3ac739111f83d57835986f0cb9fa70b9cf91bf42e3c18b2a2f588f419588c4a3",
        "fingerprint_algorithm": "sha256"
      },
      {
        "appmap_digest": "d42bbf887dcdf633d8658f2c231e892ec9b3477cc5c70489d9aa986785a580aa",
        "canonicalization_algorithm": "trace_v1",
        "digest": "57005fa16243410f74f8a6cfd299f0f24d2db3703e132204616fb7516dde82ac",
        "fingerprint_algorithm": "sha256"
      }
    ]
  },
  "classMap": [
    {
      "name": "action_pack",
      "type": "package",
      "children": [
        {
          "name": "ActionDispatch",
          "type": "class",
          "children": [
            {
              "name": "Cookies",
              "type": "class",
              "children": [
                {
                  "name": "CookieJar",
                  "type": "class",
                  "children": [
                    {
                      "name": "update",
                      "type": "function",
                      "location": "/Users/kgilpin/tmp/appland/vendor/bundle/ruby/2.6.0/gems/actionpack-5.2.4.2/lib/action_dispatch/middleware/cookies.rb:344",
                      "static": false,
                      "labels": [
                        "provider.http.cookie"
                      ],
                      "source": "      def update(other_hash)\n        @cookies.update other_hash.stringify_keys\n        self\n      end\n"
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "app/controllers",
      "type": "package",
      "children": [
        {
          "name": "AnonymousAccess",
          "type": "class",
          "children": [
            {
              "name": "anonymous_access?",
              "type": "function",
              "location": "app/controllers/concerns/anonymous_access.rb:9",
              "static": false,
              "source": "  def anonymous_access?\n    @anonymous_access\n  end\n"
            }
          ]
        },
        {
          "name": "APIController",
          "type": "class",
          "children": [
            {
              "name": "unauthorized",
              "type": "function",
              "location": "app/controllers/api_controller.rb:53",
              "static": false,
              "source": "  def unauthorized(_)\n    error = {\n      code: 'unauthorized'\n    }\n    render json: { error: error }, status: 401\n  end\n"
            }
          ]
        }
      ]
    },
    {
      "name": "json",
      "type": "package",
      "children": [
        {
          "name": "JSON",
          "type": "class",
          "children": [
            {
              "name": "Ext",
              "type": "class",
              "children": [
                {
                  "name": "Generator",
                  "type": "class",
                  "children": [
                    {
                      "name": "State",
                      "type": "class",
                      "children": [
                        {
                          "name": "generate",
                          "type": "function",
                          "location": "JSON::Ext::Generator::State#generate",
                          "static": false,
                          "labels": [
                            "format.json",
                            "provider.serialization"
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]
    }
  ],
  "events": [
    {
      "id": 63887,
      "event": "call",
      "thread_id": 70223206228000,
      "http_server_request": {
        "request_method": "GET",
        "path_info": "/api/scenarios",
        "normalized_path_info": "/api/scenarios(.:format)"
      },
      "message": [
        {
          "name": "controller",
          "class": "String",
          "value": "api/scenarios",
          "object_id": 70222270836680
        },
        {
          "name": "action",
          "class": "String",
          "value": "index",
          "object_id": 70222270839940
        }
      ]
    },
    {
      "id": 63888,
      "event": "call",
      "thread_id": 70223206228000,
      "defined_class": "ActionDispatch::Cookies::CookieJar",
      "method_id": "update",
      "path": "/Users/kgilpin/tmp/appland/vendor/bundle/ruby/2.6.0/gems/actionpack-5.2.4.2/lib/action_dispatch/middleware/cookies.rb",
      "lineno": 344,
      "static": false,
      "parameters": [
        {
          "name": "other_hash",
          "class": "Hash",
          "object_id": 70222286589000,
          "value": "{}",
          "kind": "req"
        }
      ],
      "receiver": {
        "class": "ActionDispatch::Cookies::CookieJar",
        "object_id": 70222286608200,
        "value": "#<ActionDispatch::Cookies::CookieJar:0x00007fbbcce5ae90>"
      }
    },
    {
      "id": 63889,
      "event": "return",
      "thread_id": 70223206228000,
      "parent_id": 63888,
      "elapsed": 0.000009,
      "return_value": {
        "class": "ActionDispatch::Cookies::CookieJar",
        "value": "#<ActionDispatch::Cookies::CookieJar:0x00007fbbcce5ae90>",
        "object_id": 70222286608200
      }
    },
    {
      "id": 63890,
      "event": "call",
      "thread_id": 70223206228000,
      "defined_class": "AnonymousAccess",
      "method_id": "anonymous_access?",
      "path": "app/controllers/concerns/anonymous_access.rb",
      "lineno": 9,
      "static": false,
      "parameters": [],
      "receiver": {
        "class": "API::ScenariosController",
        "object_id": 70222272855980,
        "value": "#<API::ScenariosController:0x00007fbbcb41ff58>"
      }
    },
    {
      "id": 63891,
      "event": "return",
      "thread_id": 70223206228000,
      "parent_id": 63890,
      "elapsed": 0.000007
    },
    {
      "id": 63892,
      "event": "call",
      "thread_id": 70223206228000,
      "defined_class": "APIController",
      "method_id": "unauthorized",
      "path": "app/controllers/api_controller.rb",
      "lineno": 53,
      "static": false,
      "parameters": [
        {
          "name": "_",
          "class": "Exceptions::NotAuthenticated",
          "object_id": 70222286602700,
          "value": "Exceptions::NotAuthenticated",
          "kind": "req"
        }
      ],
      "receiver": {
        "class": "API::ScenariosController",
        "object_id": 70222272855980,
        "value": "#<API::ScenariosController:0x00007fbbcb41ff58>"
      }
    },
    {
      "id": 63893,
      "event": "call",
      "thread_id": 70223206228000,
      "defined_class": "JSON::Ext::Generator::State",
      "method_id": "generate",
      "path": "JSON::Ext::Generator::State#generate",
      "static": false,
      "parameters": [
        {
          "name": "arg",
          "class": "Hash",
          "object_id": 70222944079460,
          "value": "{\"error\"=>{\"code\"=>\"unauthorized\"}}",
          "kind": "req"
        }
      ],
      "receiver": {
        "class": "JSON::Ext::Generator::State",
        "object_id": 70222944079380,
        "value": "#<JSON::Ext::Generator::State:0x00007fbc1b461c28>"
      }
    },
    {
      "id": 63894,
      "event": "return",
      "thread_id": 70223206228000,
      "parent_id": 63893,
      "elapsed": 0.000026,
      "return_value": {
        "class": "String",
        "value": "{\"error\":{\"code\":\"unauthorized\"}}",
        "object_id": 70222288411640
      }
    },
    {
      "id": 63895,
      "event": "return",
      "thread_id": 70223206228000,
      "parent_id": 63892,
      "elapsed": 0.000229,
      "return_value": {
        "class": "String",
        "value": "{\"error\":{\"code\":\"unauthorized\"}}",
        "object_id": 70222288411640
      }
    },
    {
      "id": 63896,
      "event": "return",
      "thread_id": 70223206228000,
      "parent_id": 63887,
      "elapsed": 0.001122,
      "http_server_response": {
        "status": 401,
        "mime_type": "application/json; charset=utf-8"
      }
    }
  ]
}